class t{constructor(t){this.response=t}async resolve(t){if(void 0!==this.resolvedBody)return this.resolvedBody;const e=this.response.headers.get("Content-Type")??"";return"json"===t||e.startsWith("application/json")?this.resolvedBody=await this.response.json():this.resolvedBody=await this.response.text(),this.resolvedBody}raw(){return this.response}async dereference(){const t=new Map;return this.response.headers.forEach(((e,s)=>t.set(s,e))),{status:this.response.status,headers:t,body:await this.resolve()}}}class e{static byHeader(t,s={}){return"Content-Type"in s&&s["Content-Type"].includes("application/json")?JSON.stringify(t):e.toFormData(t)}static toFormData(t){const s=e.filter(e.flattenObject(t)),n=new FormData;for(const[t,e]of Object.entries(s))n.set(t,e);return n}static toSearchParams(t){if("string"==typeof t)return t;if(t instanceof Array)return t.join("&");const s=e.filter(e.flattenObject(t)),n=new URLSearchParams;for(const[t,e]of Object.entries(s))n.set(t,e);return decodeURI(n.toString())}static flattenObject(t,s=""){return Object.keys(t).reduce(((n,o)=>{const r=s.length?s+"[":"",a=s.length?"]":"";return"object"==typeof t[o]&&null!==t[o]?Object.assign(n,e.flattenObject(t[o],r+o+a)):n[r+o+a]=t[o],n}),{})}static filter(t){return Object.keys(t).forEach((e=>{void 0===t[e]&&delete t[e]})),t}}class s{constructor(t){this.url=t instanceof URL?t:new URL(t,window.location.origin+window.location.pathname),this.abortController=new AbortController}withQueryArguments(t){const s=this.clone();t instanceof URLSearchParams||(t=new URLSearchParams(e.toSearchParams(t)));for(const[e,s]of t.entries())this.url.searchParams.append(e,s);return s}async get(e={}){const s=await this.send({method:"GET",...e});return new t(s)}async post(s,n={}){const o={body:"string"==typeof s||s instanceof FormData?s:e.byHeader(s,n?.headers),cache:"no-cache",method:"POST"},r=await this.send({...o,...n});return new t(r)}async put(s,n={}){const o={body:"string"==typeof s||s instanceof FormData?s:e.byHeader(s,n?.headers),cache:"no-cache",method:"PUT"},r=await this.send({...o,...n});return new t(r)}async delete(s={},n={}){const o={cache:"no-cache",method:"DELETE"};"string"==typeof s&&s.length>0||s instanceof FormData?o.body=s:"object"==typeof s&&Object.keys(s).length>0&&(o.body=e.byHeader(s,n?.headers));const r=await this.send({...o,...n});return new t(r)}abort(){this.abortController.abort()}clone(){return Object.assign(Object.create(this),this)}async send(e={}){const s=await fetch(this.url,this.getMergedOptions(e));if(!s.ok)throw new t(s);return s}getMergedOptions(t){const{signal:e,...n}=t;return e?.addEventListener("abort",(()=>this.abortController.abort())),{...s.defaultOptions,...n,signal:this.abortController.signal}}}s.defaultOptions={credentials:"same-origin"};const n=s;document.querySelector("#switch-off-tours")?.addEventListener("change",(async t=>{const e=t.target;if(console.log(e),e&&!e.disabled){e.disabled=!0;try{const t=new n(TYPO3.settings.ajaxUrls[e.checked?"guide_tours_enable":"guide_tours_disable"]);await t.post({}),window.top?.window.location.reload()}catch(t){console.error(t)}finally{e.disabled=!1}}}));
//# sourceMappingURL=guide_switch.js.map